var d=(P,c,l)=>new Promise((f,m)=>{var b=o=>{try{a(l.next(o))}catch(n){m(n)}},g=o=>{try{a(l.throw(o))}catch(n){m(n)}},a=o=>o.done?f(o.value):Promise.resolve(o.value).then(b,g);a((l=l.apply(P,c)).next())});import{_ as V}from"./BasicForm.vue_vue_type_script_setup_true_lang-DIn1pRzt.js";import"./BasicForm.vue_vue_type_style_index_0_lang-DQUhReNk.js";import"./componentMap-CYFpdnng.js";import{u as F}from"./useForm-B4knKx-9.js";import{C as Y,a as D}from"./entry/index-VJM-_B3m.js";import{P as M}from"./index-DIB0dVNh.js";import{i as x}from"./system-B6PtypBu.js";import{r as I}from"./antd-BA4tRdrP.js";import{d as N,ai as h,a3 as w,V as S,a6 as s,X as R,k as i,G as p,u}from"./vue-CZYcLuVH.js";import"./FormItem.vue_vue_type_script_lang-gXjHvygV.js";import"./helper-MM8B7jAV.js";import"./index-CrJR8h6z.js";import"./useWindowSizeFn-9RgF6vNY.js";import"./useFormItem-CEoeBkec.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-Br6s4Q0L.js";import"./index-iguYw4db.js";import"./uuid-D0SLUWHI.js";import"./useSortable-CluWmx7V.js";import"./download-C5sSDlBo.js";import"./base64Conver-sUr-KUg7.js";import"./index-CAgrvdh2.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-B0uAEQ4k.js";import"./copyTextToClipboard-EhsKC1py.js";import"./index-DojOR5b0.js";import"./index-B9CI9CxX.js";import"./useContentViewHeight-CYA2lL7o.js";import"./onMountedOrActivated-DahpobXO.js";const j={class:"mb-4"},me=N({__name:"RuleForm",setup(P){const c=[{field:"field1",component:"Input",label:"字段1",colProps:{span:8},required:!0},{field:"field2",component:"Input",label:"字段2",colProps:{span:8},required:!0},{field:"id",label:"id",required:!0,defaultValue:0,component:"InputNumber",show:!1},{field:"field3",component:"DatePicker",label:"字段3",colProps:{span:8},required:!0},{field:"field33",component:"DatePicker",label:"字段33",colProps:{span:8},componentProps:{valueFormat:"YYYY-MM-DD"},rules:[{required:!0,type:"string"}]},{field:"field44",component:"InputCountDown",label:"验证码",colProps:{span:8},required:!0},{field:"field4",component:"Select",label:"字段4",colProps:{span:8},componentProps:{mode:"multiple",options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}],onChange:r=>{}},rules:[{required:!0,message:"请输入aa",type:"array"}]},{field:"field441",component:"Input",label:"自定义校验",colProps:{span:8},rules:[{required:!0,validator:(r,e)=>d(this,null,function*(){return e?e==="1"?Promise.reject("值不能为1"):Promise.resolve():Promise.reject("值不能为空")}),trigger:"change"}]},{field:"field5",component:"CheckboxGroup",label:"字段5",colProps:{span:8},componentProps:{options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"}]},rules:[{required:!0}]},{field:"field7",component:"RadioGroup",label:"字段7",colProps:{span:8},componentProps:{options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"}]},rules:[{required:!0,message:"覆盖默认生成的校验信息"}]},{field:"field8",component:"Input",label:"后端异步验证",colProps:{span:8},helpMessage:["本字段演示异步验证","本地规则：必须填写","后端规则：不能包含admin"],rules:[{required:!0,message:"请输入数据"},{trigger:"blur",validator(r,e){return new Promise((t,y)=>{if(!e)return t();x(e).then(t).catch(q=>{y(q.message||"验证失败")})})}}]}],{createMessage:l}=D(),[f,{validateFields:m,clearValidate:b,getFieldsValue:g,resetFields:a,setFieldsValue:o}]=F({labelWidth:120,schemas:c,actionColOptions:{span:24}});function n(){return d(this,null,function*(){try{const r=yield m()}catch(r){}})}function C(){return d(this,null,function*(){b()})}function k(){const r=g();l.success("values:"+JSON.stringify(r))}function v(){o({field1:1111,field4:["1"],field5:["1"],field7:"1",field33:"2020-12-12",field3:I("2020-12-12","YYYY-MM-DD")})}function _(r){l.success("click search,values:"+JSON.stringify(r))}return(r,e)=>{const t=h("a-button");return S(),w(u(M),{title:"表单校验示例"},{default:s(()=>[R("div",j,[i(t,{onClick:n,class:"mr-2"},{default:s(()=>[...e[0]||(e[0]=[p(" 手动校验表单 ",-1)])]),_:1}),i(t,{onClick:C,class:"mr-2"},{default:s(()=>[...e[1]||(e[1]=[p(" 清空校验信息 ",-1)])]),_:1}),i(t,{onClick:k,class:"mr-2"},{default:s(()=>[...e[2]||(e[2]=[p(" 获取表单值 ",-1)])]),_:1}),i(t,{onClick:v,class:"mr-2"},{default:s(()=>[...e[3]||(e[3]=[p(" 设置表单值 ",-1)])]),_:1}),i(t,{onClick:u(a),class:"mr-2"},{default:s(()=>[...e[4]||(e[4]=[p(" 重置 ",-1)])]),_:1},8,["onClick"])]),i(u(Y),{title:"表单校验"},{default:s(()=>[i(u(V),{onRegister:u(f),onSubmit:_},null,8,["onRegister"])]),_:1})]),_:1})}}});export{me as default};
