var m=(t,o,e)=>new Promise((n,r)=>{var u=s=>{try{a(e.next(s))}catch(i){r(i)}},l=s=>{try{a(e.throw(s))}catch(i){r(i)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,l);a((e=e.apply(t,o)).next())});import{t as h,h as F,f as I,w as v}from"./entry/index-BUx0ZtK4.js";import{f as d,u as c,d as C,c as z,h as A,a3 as S,V as w,a8 as y,a6 as p,G as B,$ as _,ai as $,aj as k,a4 as x,a0 as N,Z as T,_ as j,k as D}from"./vue-CZYcLuVH.js";import{F as O,h as P}from"./antd-BA4tRdrP.js";import{u as V}from"./useFormItem-CEoeBkec.js";function R(t){const o=d(t),e=d(!1);let n;function r(){n&&window.clearInterval(n)}function u(){e.value=!1,r(),n=null}function l(){c(e)||n||(e.value=!0,n=setInterval(()=>{c(o)===1?(u(),o.value=t):o.value-=1},1e3))}function a(){o.value=t,u()}function s(){a(),l()}return h(()=>{a()}),{start:l,reset:a,restart:s,clear:r,stop:u,currentCount:o,isStart:e}}const g=C({name:"CountButton",__name:"CountButton",props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(t){const o=t,{t:e}=F(),n=d(!1),{currentCount:r,isStart:u,start:l,reset:a}=R(o.count),s=z(()=>c(u)?e("component.countdown.sendText",[c(r)]):e("component.countdown.normalText"));A(()=>{o.value===void 0&&a()});function i(){return m(this,null,function*(){const{beforeStartFunc:f}=o;if(f&&P(f)){n.value=!0;try{(yield f())&&l()}finally{n.value=!1}}else l()})}return(f,b)=>(w(),S(c(O),y(f.$attrs,{disabled:c(u),onClick:i,loading:n.value}),{default:p(()=>[B(_(s.value),1)]),_:1},16,["disabled","loading"]))}}),E=C({name:"CountDownInput",inheritAttrs:!1,__name:"CountdownInput",props:{value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(t){const o=t,{prefixCls:e}=I("countdown-input"),[n]=V(o);return(r,u)=>{const l=$("a-input");return w(),S(l,y(r.$attrs,{class:c(e),size:t.size,value:c(n)}),k({addonAfter:p(()=>[D(g,{size:t.size,count:t.count,value:c(n),beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[x(Object.keys(r.$slots).filter(a=>a!=="addonAfter"),a=>({name:a,fn:p(s=>[N(r.$slots,a,T(j(s||{})))])}))]),1040,["class","size","value"])}}}),H=v(E);v(g);export{H as C};
