var E=(C,r,i)=>new Promise((u,v)=>{var l=o=>{try{m(i.next(o))}catch(f){v(f)}},_=o=>{try{m(i.throw(o))}catch(f){v(f)}},m=o=>o.done?u(o.value):Promise.resolve(o.value).then(l,_);m((i=i.apply(C,r)).next())});import{d as G,f as S,r as M,c as N,u as e,U as A,V as U,F as V,n as $,A as L,k as s,al as O,a6 as a,X as P,G as d,$ as c,Y as W}from"./vue-DdhQyU-d.js";import{u as q,a as K,b as X,L as p,_ as j}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-ChFrew_b.js";import{h as Q,f as Y,l as H,a as J}from"./entry/index-CddLxZ9C.js";import{a4 as T,G as D,W as Z,X as ee,a5 as se,F as y,a6 as ae,a7 as te,a8 as le,a9 as oe,aa as ne,ab as re}from"./antd-Bp8JzQqk.js";const fe=G({__name:"LoginForm",setup(C){const r=ee,i=Z,u=T.Item,v=D.Password,{t:l}=Q(),{notification:_,createErrorModal:m}=J(),{prefixCls:o}=Y("login"),f=H(),{setLoginState:w,getLoginState:h}=q(),{getFormRules:B}=K(),F=S(),k=S(!1),b=S(!1),g=M({account:"vben",password:"123456"}),{validForm:z}=X(F),I=N(()=>e(h)===p.LOGIN);function R(){return E(this,null,function*(){const x=yield z();if(x)try{k.value=!0;const t=yield f.login({password:x.password,username:x.account,mode:"none"});t&&_.success({message:l("sys.login.loginSuccessTitle"),description:`${l("sys.login.loginSuccessDesc")}: ${t.realName}`,duration:3})}catch(t){m({title:l("sys.api.errorTip"),content:t.message||l("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${o}`)||document.body})}finally{k.value=!1}})}return(x,t)=>(U(),A(V,null,[$(s(j,{class:"enter-x"},null,512),[[L,I.value]]),$(s(e(T),{class:"p-4 enter-x",model:g,rules:e(B),ref_key:"formRef",ref:F,onKeypress:O(R,["enter"])},{default:a(()=>[s(e(u),{name:"account",class:"enter-x"},{default:a(()=>[s(e(D),{size:"large",value:g.account,"onUpdate:value":t[0]||(t[0]=n=>g.account=n),placeholder:e(l)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:a(()=>[s(e(v),{size:"large",visibilityToggle:"",value:g.password,"onUpdate:value":t[1]||(t[1]=n=>g.password=n),placeholder:e(l)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(r),{span:12},{default:a(()=>[s(e(u),null,{default:a(()=>[s(e(se),{checked:b.value,"onUpdate:checked":t[2]||(t[2]=n=>b.value=n),size:"small"},{default:a(()=>[d(c(e(l)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:a(()=>[s(e(u),{style:{"text-align":"right"}},{default:a(()=>[s(e(y),{type:"link",size:"small",onClick:t[3]||(t[3]=n=>e(w)(e(p).RESET_PASSWORD))},{default:a(()=>[d(c(e(l)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:a(()=>[s(e(y),{type:"primary",size:"large",block:"",onClick:R,loading:k.value},{default:a(()=>[d(c(e(l)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(i),{class:"enter-x",gutter:[16,16]},{default:a(()=>[s(e(r),{md:8,xs:24},{default:a(()=>[s(e(y),{block:"",onClick:t[4]||(t[4]=n=>e(w)(e(p).MOBILE))},{default:a(()=>[d(c(e(l)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24},{default:a(()=>[s(e(y),{block:"",onClick:t[5]||(t[5]=n=>e(w)(e(p).QR_CODE))},{default:a(()=>[d(c(e(l)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24},{default:a(()=>[s(e(y),{block:"",onClick:t[6]||(t[6]=n=>e(w)(e(p).REGISTER))},{default:a(()=>[d(c(e(l)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),s(e(ae),{class:"enter-x"},{default:a(()=>[d(c(e(l)("sys.login.otherSignIn")),1)]),_:1}),P("div",{class:W(["flex justify-evenly enter-x",`${e(o)}-sign-in-way`])},[s(e(te)),s(e(le)),s(e(oe)),s(e(ne)),s(e(re))],2)]),_:1},8,["model","rules"]),[[L,I.value]])],64))}});export{fe as _};
