import{V as g}from"./antd-BA4tRdrP.js";import{d as b,f as w,o as k,w as S,a3 as p,V as c,u as f,a6 as u,X as i,U as _,a4 as I,F as M,$ as N}from"./vue-CZYcLuVH.js";const C="/assets/tuoren-logo-2wF9XiN_.png",J={style:{display:"-webkit-box","max-height":"100px",overflow:"hidden","text-overflow":"ellipsis","-webkit-box-orient":"vertical","line-clamp":"3"}},A=b({__name:"leftList",props:{currentMsg:{type:Array,default:()=>[]}},emits:["selectMsg"],setup(m,{emit:x}){const d=x,v=t=>{d("selectMsg",t)},h=m,e=w([]);k(()=>{const t=localStorage.getItem("allmsgs");if(t){const s=JSON.parse(t);e.value=s}}),S(()=>h.currentMsg,t=>{var a;if(!t||!Array.isArray(t)||t.length===0)return;const s=JSON.parse(JSON.stringify(t));if((e.value.length===0||e.value.findIndex(r=>{var o,l;return((o=r[1])==null?void 0:o.id)===((l=s[1])==null?void 0:l.id)})===-1)&&((a=s[1])==null?void 0:a.id)!==null)e.value.unshift(s),localStorage.setItem("allmsgs",JSON.stringify(e.value));else if(e.value.findIndex(r=>{var o,l;return((o=r[1])==null?void 0:o.id)===((l=s[1])==null?void 0:l.id)})!==-1){const r=e.value.findIndex(o=>{var l,n;return((l=o[1])==null?void 0:l.id)===((n=s[1])==null?void 0:n.id)});e.value[r]=s,localStorage.setItem("allmsgs",JSON.stringify(e.value))}},{deep:!0});const y=()=>{try{localStorage.removeItem("allmsgs"),e.value=[],d("selectMsg",[],!0)}catch(t){}};return(t,s)=>(c(),p(f(g),{style:{height:"100%",overflow:"auto","overflow-x":"hidden","border-radius":"8px 0 0 8px","box-shadow":"-4px 2px 8px 4px rgb(0 0 0 / 20%)"}},{title:u(()=>[...s[0]||(s[0]=[i("img",{style:{width:"auto",height:"30px"},src:C,alt:""},null,-1)])]),default:u(()=>[i("p",{style:{"margin-bottom":"16px",color:"rgb(0 0 0 / 85%)","font-size":"14px","font-weight":"500"}},[i("button",{onClick:y},"清除所有对话")]),(c(!0),_(M,null,I(e.value,(a,r)=>{var o,l;return c(),p(f(g),{key:((o=a[1])==null?void 0:o.id)||r,hoverable:!0,title:((l=a[0])==null?void 0:l.content)||"对话",style:{"margin-top":"10px"},onClick:n=>v(a)},{default:u(()=>{var n;return[i("div",J,N(((n=a[1])==null?void 0:n.content)||""),1)]}),_:2},1032,["title","onClick"])}),128))]),_:1}))}});export{A as _,C as l};
