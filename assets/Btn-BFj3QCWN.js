var P=(g,u,n)=>new Promise((v,m)=>{var p=e=>{try{d(n.next(e))}catch(t){m(t)}},y=e=>{try{d(n.throw(e))}catch(t){m(t)}},d=e=>e.done?v(e.value):Promise.resolve(e.value).then(p,y);d((n=n.apply(g,u)).next())});import{_ as b}from"./CurrentPermissionMode.vue_vue_type_script_setup_true_lang-JlcuQUSU.js";import{X as A,a_ as V,aF as _,l as w,aZ as D,c as N}from"./entry/index-Be056_tE.js";import{A as c}from"./index-h-h6o376.js";import{P as T}from"./index-D4crmGeM.js";import{d as $,c as F,ai as M,q as U,a3 as i,V as l,a6 as s,k as o,X as B,U as E,W as k,G as r,$ as G,u as a,F as I,n as C}from"./vue-CZYcLuVH.js";import{a6 as f,aG as W}from"./antd-BA4tRdrP.js";import"./useContentViewHeight-DT9lRWta.js";import"./useWindowSizeFn-DzNNC3Qx.js";import"./onMountedOrActivated-DahpobXO.js";const X=$({__name:"Btn",setup(g){const{hasPermission:u}=A(),n=V(),v=_(),m=w(),p=F(()=>v.getProjectConfig.permissionMode===D.BACK);function y(d){return P(this,null,function*(){const e="fakeToken"+d;m.setToken(e),m.getUserInfoAction(),n.changePermissionCode()})}return(d,e)=>{const t=M("a-button"),x=U("auth");return l(),i(a(T),{contentBackground:"",title:"按钮权限控制",contentClass:"p-4"},{default:s(()=>[o(b),B("p",null,[e[2]||(e[2]=r(" 当前拥有的code列表: ",-1)),B("a",null,G(a(n).getPermCodeList),1)]),o(a(f)),o(a(W),{class:"mt-4",type:"info",message:"点击后请查看按钮变化(必须处于后台权限模式才可测试此页面所展示的功能)","show-icon":""}),o(a(f)),o(t,{type:"primary",class:"mr-2",onClick:e[0]||(e[0]=S=>y(2)),disabled:!p.value},{default:s(()=>[...e[3]||(e[3]=[r(" 点击切换按钮权限(用户id为2) ",-1)])]),_:1},8,["disabled"]),o(t,{type:"primary",onClick:e[1]||(e[1]=S=>y(1)),disabled:!p.value},{default:s(()=>[...e[4]||(e[4]=[r(" 点击切换按钮权限(用户id为1,默认) ",-1)])]),_:1},8,["disabled"]),p.value?(l(),E(I,{key:0},[o(a(f),null,{default:s(()=>[...e[5]||(e[5]=[r("组件方式判断权限",-1)])]),_:1}),o(a(c),{value:"1000"},{default:s(()=>[o(t,{type:"primary",class:"mx-4"},{default:s(()=>[...e[6]||(e[6]=[r(" 拥有code ['1000']权限可见 ",-1)])]),_:1})]),_:1}),o(a(c),{value:"2000"},{default:s(()=>[o(t,{color:"success",class:"mx-4"},{default:s(()=>[...e[7]||(e[7]=[r(" 拥有code ['2000']权限可见 ",-1)])]),_:1})]),_:1}),o(a(c),{value:["1000","2000"]},{default:s(()=>[o(t,{color:"error",class:"mx-4"},{default:s(()=>[...e[8]||(e[8]=[r(" 拥有code ['1000','2000']角色权限可见 ",-1)])]),_:1})]),_:1}),o(a(f),null,{default:s(()=>[...e[9]||(e[9]=[r("函数方式方式判断权限",-1)])]),_:1}),a(u)("1000")?(l(),i(t,{key:0,type:"primary",class:"mx-4"},{default:s(()=>[...e[10]||(e[10]=[r(" 拥有code ['1000']权限可见 ",-1)])]),_:1})):k("",!0),a(u)("2000")?(l(),i(t,{key:1,color:"success",class:"mx-4"},{default:s(()=>[...e[11]||(e[11]=[r(" 拥有code ['2000']权限可见 ",-1)])]),_:1})):k("",!0),a(u)(["1000","2000"])?(l(),i(t,{key:2,color:"error",class:"mx-4"},{default:s(()=>[...e[12]||(e[12]=[r(" 拥有code ['1000','2000']角色权限可见 ",-1)])]),_:1})):k("",!0),o(a(f),null,{default:s(()=>[...e[13]||(e[13]=[r("指令方式方式判断权限(该方式不能动态修改权限.)",-1)])]),_:1}),C((l(),i(t,{type:"primary",class:"mx-4"},{default:s(()=>[...e[14]||(e[14]=[r(" 拥有code ['1000']权限可见 ",-1)])]),_:1})),[[x,"1000"]]),C((l(),i(t,{color:"success",class:"mx-4"},{default:s(()=>[...e[15]||(e[15]=[r(" 拥有code ['2000']权限可见 ",-1)])]),_:1})),[[x,"2000"]]),C((l(),i(t,{color:"error",class:"mx-4"},{default:s(()=>[...e[16]||(e[16]=[r(" 拥有code ['1000','2000']角色权限可见 ",-1)])]),_:1})),[[x,["1000","2000"]]])],64)):k("",!0)]),_:1})}}}),R=N(X,[["__scopeId","data-v-4a1c2300"]]);export{R as default};
